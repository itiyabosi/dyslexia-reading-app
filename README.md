# ディスレクシア児童 音韻認識テストアプリ

ディスレクシア児童の音韻認識の発達を分析するために作られた、単語読み上げテストアプリケーションです。

## 機能

### 1. 児童管理
- 児童の基本情報（名前、学年、生年月日、備考）を登録・管理
- 児童ごとのテスト実施状況を追跡

### 2. 単語リスト管理
- 複数の単語リストを作成・管理
- 各リストに任意の単語を追加・削除
- サンプルとして「基本単語セット1」が自動作成されます

### 3. 読み上げテスト
- 選択した児童に対して、指定した単語リストでテストを実施
- **タイマー機能**: スタートボタンで計測開始、ストップボタンで計測終了
- 各単語について以下を記録：
  - 読めたか／読めなかったか
  - 読み上げにかかった秒数（ミリ秒単位）
  - 読み間違えた場合の内容
  - 備考

### 4. データ分析
- 児童別の統計表示：
  - テスト実施回数
  - 読めた単語数
  - 平均読み時間
  - 読み間違い回数
- テスト履歴の詳細表示（日時、単語、結果、読み時間など）

## データベース構造

### テーブル一覧

1. **children（児童マスター）**
   - id, name, grade, birth_date, notes, created_at

2. **word_lists（単語リスト）**
   - id, name, description, created_at

3. **words（単語）**
   - id, word_list_id, word_text, display_order

4. **reading_records（読み上げテスト記録）**
   - id, child_id, word_id, test_date, could_read, reading_time_seconds, misread_as, notes

すべてのデータは SQLite データベース（reading_data.db）に保存されます。

## インストール方法

### 必要な環境
- Node.js（バージョン 14 以上推奨）
- npm

### セットアップ手順

1. プロジェクトディレクトリに移動
```bash
cd dyslexia-reading-app
```

2. 依存パッケージのインストール
```bash
npm install
```

3. アプリケーションの起動
```bash
npm start
```

4. ブラウザで以下のURLにアクセス
```
http://localhost:3000
```

## 使い方

### 1. 児童の登録
1. ホーム画面で児童情報を入力して「登録」ボタンをクリック

### 2. 単語リストの作成（オプション）
1. 「単語リスト管理」ページに移動
2. 新しいリストを作成し、単語を追加

### 3. テストの実施
1. ホーム画面で「テスト開始」ボタンをクリック
2. 使用する単語リストを選択
3. 各単語について：
   - 児童に単語を見せる
   - 「スタート」ボタンをクリック
   - 児童が読み始める
   - 読み終わったら「ストップ」ボタンをクリック
   - 結果を記録（読めた／読めなかった、読み間違いなど）
   - 「記録して次へ」をクリック

### 4. データの確認
1. 「データ分析」ページに移動
2. 児童を選択して統計とテスト履歴を確認

## 技術スタック

- **バックエンド**: Node.js + Express
- **データベース**: SQLite (better-sqlite3)
- **テンプレートエンジン**: EJS
- **フロントエンド**: HTML/CSS/JavaScript（Vanilla JS）

## ファイル構成

```
dyslexia-reading-app/
├── server.js              # Expressサーバー
├── database.js            # データベース初期化とスキーマ定義
├── package.json           # プロジェクト設定
├── reading_data.db        # SQLiteデータベース（自動生成）
├── public/
│   └── css/
│       └── style.css      # スタイルシート
└── views/
    ├── index.ejs          # ホーム画面（児童管理）
    ├── word-lists.ejs     # 単語リスト一覧
    ├── word-list-detail.ejs # 単語リスト詳細・編集
    ├── test.ejs           # 読み上げテスト画面
    └── analysis.ejs       # データ分析画面
```

## 注意事項

- データベースファイル（reading_data.db）は自動的に作成されます
- サンプルデータとして「基本単語セット1」が初回起動時に自動作成されます
- 児童を削除すると、その児童のすべてのテスト記録も削除されます
- 単語リストを削除すると、その中の単語とテスト記録も削除されます

## ライセンス

ISC
